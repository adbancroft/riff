
## rifflib
A library to read & write [resource interchange file format](https://en.wikipedia.org/wiki/Resource_Interchange_File_Format) (RIFF) files.  Common uses of the RIFF format are multimedia containers such as [AVI](https://en.wikipedia.org/wiki/Audio_Video_Interleave) and [WAV](https://en.wikipedia.org/wiki/WAV) files.

The library is focused on reading & writing RIFF chunks. It does not provide any interpretation of what the chunks represent. E.g. it provides no additional functionality for the [AVI](https://docs.microsoft.com/en-us/windows/win32/directshow/avi-riff-file-reference) [hdrl](https://docs.microsoft.com/en-us/windows/win32/directshow/avi-riff-file-reference#avi-main-header) chunk.

### Design Note
Similar to the .NET Class Library I/O classes, the library is broken into separate read & write portions.

### Reading
Call `Riff.Read.Reader.Read`. 
- This will return a *chunk descriptor*, which encapsulates all chunks in
   the source stream. 
- Use LINQ to search & extract individual chunks
- Chunk descriptors are immutable

Chunk data can be loaded immediately or lazily, as determined by the caller: pass the appropriate `IChunkFactory` to `Riff.Read.Reader.Read`.
### Writing
Write chunks can be created in 2 ways:
1. Directly by creating an instance of the appropriate chunk class. E.g. `ByteArrayChunk`
2. Indirectly from a chunk descriptor generated by reading a file: `ChunkDescriptorBase.CreateWriteChunk()`. 
    - The resulting chunk is immutable, but children can be added or removed.
    - This allows reading a file, making edits, whilst lazily loading source data in a memory efficient manner

To write the chunk (and it's child chunks), call `Write(BinaryWriter)`
    
### Extensibility
The library is extensible via derivation if you need to add semantics to chunk types:

 1. (optional) Add a write chunk class
 2. Add a read chunk descriptor class
 3. Implement `IChunkFactory` to create instances of your chunk descriptor
     1. Or derive from `BasicChunkFactory, LazyBasicChunkFactory`
